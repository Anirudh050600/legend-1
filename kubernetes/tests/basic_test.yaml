# A demo custom resource for the Kopf example operators.
apiVersion: grofers.io/v1
kind: GrafanaDashboard
metadata:
  name: sample-title-9
  labels:
    app: sample-title
spec:
  title: SampleTitle1
  grafana_folder: TestRELegend
  service: SampleService
  alert_channels: ["service-opsgenie"]
  environment: Prod
  description: Logging tool for everything deployed on kubernetes
  references:
    deployment: https://github.com/grofers/kube-infra/tree/master/manifests/loki
    documentation: https://github.com/grafana/loki/tree/master/docs
    metrics_definition: https://github.com/grofers/kube-infra/tree/master/manifests/loki
  tags:
  - stage
  - infra
  - crd-testing
  components:
    s3:
      dimensions:
      - bucket_name: grofers-loki-prod
        filter_id: EntireBucket
      - bucket_name: retail-bulk-upload
        filter_id: EntireBucket
      panels:
      - title: (R) Request Count - WriteMY
        type: Graph
        description: TODO
        targets:
        - dimensions: {"BucketName": "grofers-loki-prod" ,"FilterId": "EntireBucket"}
          metric: PutRequests
          namespace: AWS/S3
          statistic: Sum
          alias: '{{ metric }}'
          ref_no: 1
        - dimensions: {"BucketName": "grofers-loki-prod" ,"FilterId": "EntireBucket"}
          metric: PostRequests
          namespace: AWS/S3
          statistic: Sum
          alias: '{{ metric }}'
          ref_no: 2

    platform_ec2:
      dimensions:
      - host: purchaseorder
    promtail:
      dimensions:
      - pod_name: promtail
    redis:
      dimensions:
        - job_name: po-redis-metrics
    celery:
      dimensions:
        - job_name: po-celery-metrics
